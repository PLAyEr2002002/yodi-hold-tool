<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Yodi hold creator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
      }

      body {
        margin: 0;
        padding: 40px 16px;
        background: #f5f5fb;
        color: #111827;
      }

      .container {
        max-width: 960px;
        margin: 0 auto;
        background: #ffffff;
        border-radius: 16px;
        padding: 32px 24px 40px;
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
      }

      h1 {
        margin-top: 0;
        font-size: 28px;
        margin-bottom: 4px;
      }

      p.subtitle {
        margin-top: 0;
        margin-bottom: 24px;
        font-size: 14px;
        color: #6b7280;
      }

      label {
        font-size: 14px;
        font-weight: 500;
        display: block;
        margin-bottom: 4px;
      }

      input[type="text"],
      input[type="number"],
      input[type="password"],
      textarea {
        width: 100%;
        padding: 8px 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
        font-size: 14px;
      }

      textarea {
        min-height: 70px;
        resize: vertical;
      }

      .field {
        margin-bottom: 16px;
      }

      .small {
        font-size: 12px;
        color: #6b7280;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 8px;
        font-size: 13px;
      }

      thead {
        background: #f3f4ff;
      }

      th,
      td {
        border: 1px solid #e5e7eb;
        padding: 6px 8px;
        vertical-align: middle;
      }

      th {
        text-align: left;
        font-weight: 600;
        font-size: 13px;
      }

      td input {
        width: 100%;
        font-size: 13px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 8px 14px;
        border-radius: 999px;
        font-size: 14px;
        border: none;
        cursor: pointer;
        gap: 6px;
      }

      .btn-primary {
        background: #4f46e5;
        color: white;
      }

      .btn-secondary {
        background: #e5e7eb;
        color: #111827;
      }

      .btn-small {
        padding: 4px 9px;
        font-size: 12px;
      }

      .btn-danger {
        background: #fee2e2;
        color: #b91c1c;
      }

      .mt-8 {
        margin-top: 8px;
      }

      .mt-16 {
        margin-top: 16px;
      }

      .mt-24 {
        margin-top: 24px;
      }

      .flex-between {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
        align-items: center;
      }

      .result-panel {
        margin-top: 24px;
        padding: 16px;
        border-radius: 12px;
        background: #ecfdf5;
        border: 1px solid #bbf7d0;
        font-size: 13px;
      }

      .result-panel h3 {
        margin-top: 0;
        margin-bottom: 8px;
        font-size: 15px;
      }

      .result-panel textarea {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        font-size: 12px;
        line-height: 1.4;
        background: #f9fafb;
      }

      .result-row {
        margin-top: 8px;
      }

      .error {
        margin-top: 8px;
        color: #b91c1c;
        font-size: 13px;
      }

      .activity-log {
        margin-top: 24px;
        padding: 12px;
        border-radius: 12px;
        border: 1px solid #e5e7eb;
        background: #f9fafb;
        font-size: 12px;
        max-height: 180px;
        overflow-y: auto;
        white-space: pre-line;
      }

      .activity-log h3 {
        margin: 0 0 6px 0;
        font-size: 13px;
      }

      @media (max-width: 640px) {
        .container {
          padding: 24px 16px 32px;
        }

        table {
          font-size: 12px;
        }

        th,
        td {
          padding: 4px 6px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Yodi hold creator</h1>
      <p class="subtitle">
        Create a Stripe Checkout link that authorizes the card only. You capture
        later from the Stripe Dashboard.
      </p>

      <div class="field">
        <label for="customerEmail">Customer email (optional)</label>
        <input
          type="text"
          id="customerEmail"
          placeholder="customer@example.com"
        />
      </div>

      <div class="field">
        <label for="internalNote">Internal note</label>
        <textarea
          id="internalNote"
          placeholder="e.g. Sara – H&amp;M Watergardens order"
        ></textarea>
      </div>

      <div class="field">
        <label for="deliveryFeeAud">Delivery / service fee (AUD)</label>
        <input
          type="number"
          id="deliveryFeeAud"
          min="0"
          step="0.01"
          placeholder="15.00"
        />
        <div class="small">
          This will show as a separate “Delivery &amp; service” line in
          Checkout.
        </div>
      </div>

      <div class="field">
        <label for="adminPassword">Admin password</label>
        <input
          type="password"
          id="adminPassword"
          placeholder="Enter admin password"
        />
        <div class="small">
          Only people who know this password can create links. Password is
          checked on the server.
        </div>
      </div>

      <div class="mt-24">
        <div class="flex-between">
          <h2 style="font-size: 18px; margin: 0">Items</h2>
          <button id="addItem" class="btn btn-secondary btn-small">
            + Add item
          </button>
        </div>
        <div class="small mt-8">
          Prices are in AUD. Enter price in dollars, the tool converts to cents
          for Stripe.
        </div>

        <table class="mt-8">
          <thead>
            <tr>
              <th style="width: 18%">Name</th>
              <th style="width: 24%">Description</th>
              <th style="width: 24%">Image URL (optional)</th>
              <th style="width: 14%">Price AUD</th>
              <th style="width: 10%">Qty</th>
              <th style="width: 10%">Remove</th>
            </tr>
          </thead>
          <tbody id="itemsBody"></tbody>
        </table>
      </div>

      <div class="mt-24">
        <button id="createBtn" class="btn btn-primary">
          Create hold link
        </button>
        <span id="statusMsg" class="small"></span>
        <div id="errorMsg" class="error" style="display: none"></div>
      </div>

      <div id="resultPanel" class="result-panel" style="display: none">
        <h3>Hold link</h3>
        <div class="result-row">
          <div class="small" style="margin-bottom: 4px">
            Send this link to the customer. It will authorize the total amount
            only.
          </div>
          <div class="flex-between">
            <textarea
              id="checkoutLink"
              readonly
              rows="3"
              style="flex: 1 1 auto; margin-right: 8px"
            ></textarea>
            <button id="copyLinkBtn" class="btn btn-secondary btn-small">
              Copy link
            </button>
          </div>
        </div>

        <div class="result-row" style="margin-top: 16px">
          <h3 style="margin-bottom: 4px">Copy for Stripe notes</h3>
          <div class="small" style="margin-bottom: 4px">
            Paste this into the PaymentIntent notes or an internal system.
          </div>
          <div class="flex-between">
            <textarea
              id="noteText"
              readonly
              rows="5"
              style="flex: 1 1 auto; margin-right: 8px"
            ></textarea>
            <button id="copyNoteBtn" class="btn btn-secondary btn-small">
              Copy notes
            </button>
          </div>
        </div>
      </div>

      <div class="activity-log" id="activityLog">
        <h3>Activity log</h3>
        <div id="activityLines" class="small">
          Waiting, click “Create hold link” to start.
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
